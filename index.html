<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Dr. Rimzhimâ€™s Course Grade Estimator</title>

<style>
/* ================================================================
   GLOBAL PAGE STYLE
================================================================ */

body {
  font-family: Arial, sans-serif;
  background: #f5f6fa;
  margin: 0;
  padding: 0;
  color: #1e293b;
}

header {
  width: 100%;
  background: crimson;
  color: white;
  text-align: center;
  padding: 25px 0;
  font-size: 26px;
  font-weight: bold;
}

/* Welcome box */

#welcomeBox {
  margin: 40px auto;
  width: 80%;
  max-width: 700px;
  text-align: center;
}

#welcomeBox h2 {
  font-size: 24px;
  color: #334155;
}

.divider {
  border: none;
  height: 1px;
  background: rgba(0,0,0,0.08);
  width: 70%;
  margin: 20px auto;
}

/* Tabs section */

.tabs {
  text-align: center;
  margin-top: 20px;
}

.tabButton {
  background: crimson;
  color: white;
  border: none;
  padding: 14px 28px;
  font-size: 17px;
  margin: 10px;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.3s;
}

.tabButton:hover {
  background: #b30026;
}

/* Hidden calculators */

.tabContent {
  display: none;
  width: 85%;
  max-width: 750px;
  margin: 30px auto;
  background: white;
  padding: 30px;
  border-radius: 14px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.10);
}

.tabContent h2 {
  text-align: center;
  color: #334155;
}

/* Form style */

label {
  display: block;
  margin-top: 14px;
  font-weight: bold;
}

input[type="number"] {
  width: 100%;
  padding: 8px;
  margin-top: 4px;
  font-size: 15px;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
}

.calcButton {
  width: 100%;
  margin-top: 25px;
  background: crimson;
  color: white;
  padding: 12px;
  font-size: 17px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

.calcButton:hover {
  background: #b30026;
}

/* Results */

.resultBox {
  display: none;
  margin-top: 20px;
  padding: 15px;
  background: #fff1f1;
  border-left: 4px solid crimson;
  border-radius: 6px;
  font-size: 15px;
  color: #b30026;
}

/* Return button */

.returnButton {
  margin-top: 30px;
  display: block;
  width: 100%;
  background: #475569;
  color: white;
  padding: 12px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

.returnButton:hover {
  background: #334155;
}
</style>
</head>

<body>

<header>Dr. Rimzhimâ€™s Grade Estimator â€“ Psychology Courses</header>

<div id="welcomeBox">
  <h2>Welcome!</h2>
  <p>Select your course to begin.</p>
</div>

<div class="tabs">
  <button class="tabButton" onclick="openCourse('intro')">Introduction to Psychology</button>
  <button class="tabButton" onclick="openCourse('bio')">Biological Psychology</button>
</div>

<hr class="divider">

<!-- ============================================================= -->
<!-- INTRODUCTION TO PSYCHOLOGY â€” FULL CALCULATOR                  -->
<!-- ============================================================= -->

<div id="intro" class="tabContent">

<h2>Introduction to Psychology â€“ Grade Estimator</h2>

<!-- Visit Counter -->
<p style="margin-top:-5px;">
  ðŸ‘¥ <strong>Visits to this calculator:</strong>
  <span id="introCount">0</span>
</p>

<!-- ============================= -->
<!-- STEP 1: QUIZ AVERAGE CALC     -->
<!-- ============================= -->

<p><strong>Step 1:</strong> Calculate your Average Quiz Score (GQs)</p>
<p>Enter all quiz scores as <strong>percentages</strong> (0â€“100).</p>

<label>GQ01:</label>
<input type="number" id="i_GQ01" min="0" max="100" step="0.1">

<label>GQ2A:</label>
<input type="number" id="i_GQ2A" min="0" max="100" step="0.1">

<label>GQ2B:</label>
<input type="number" id="i_GQ2B" min="0" max="100" step="0.1">

<label>GQ03:</label>
<input type="number" id="i_GQ03" min="0" max="100" step="0.1">

<label>GQ4A:</label>
<input type="number" id="i_GQ4A" min="0" max="100" step="0.1">

<label>GQ4B:</label>
<input type="number" id="i_GQ4B" min="0" max="100" step="0.1">

<label>GQ05:</label>
<input type="number" id="i_GQ05" min="0" max="100" step="0.1">

<label>GQ06:</label>
<input type="number" id="i_GQ06" min="0" max="100" step="0.1">

<label>GQ07:</label>
<input type="number" id="i_GQ07" min="0" max="100" step="0.1">

<label>GQ08:</label>
<input type="number" id="i_GQ08" min="0" max="100" step="0.1">

<button class="calcButton" onclick="calculateIntroQuiz()">
  Calculate Average Quiz Score
</button>

<div id="introQuizResult" class="resultBox"></div>

<!-- ============================= -->
<!-- STEP 2: FINAL GRADE CALC      -->
<!-- ============================= -->

<h3 style="margin-top:35px;">Step 2: Calculate Your Final Course Percentage</h3>
<p>Your Average Quiz Score from Step 1 will auto-fill below.</p>

<label>1st Midterm Exam Score (%):</label>
<input type="number" id="i_mt1" min="0" max="100" step="0.1">

<label>2nd Midterm Exam Score (%):</label>
<input type="number" id="i_mt2" min="0" max="100" step="0.1">

<label>Final Exam Score (%):</label>
<input type="number" id="i_final" min="0" max="100" step="0.1">

<label>Average Quiz Score (%):</label>
<input type="number" id="i_quiz" readonly>

<label>Average Group Project Score (%):</label>
<input type="number" id="i_gp" min="0" max="100" step="0.1">

<label>Attendance Score (%):</label>
<input type="number" id="i_attend" min="0" max="100" step="0.1">

<button class="calcButton" onclick="calculateIntroFinal()">
  Calculate Final Score
</button>

<div id="introFinalResult" class="resultBox"></div>

<button class="returnButton" onclick="returnHome()">
  â†© Return to Course Selection
</button>

</div> <!-- END INTRO PSYCH TAB -->

<!-- ============================================================= -->
<!-- BIOLOGICAL PSYCHOLOGY â€” FULL CALCULATOR                       -->
<!-- ============================================================= -->

<div id="bio" class="tabContent">

<h2>Biological Psychology â€“ Grade Estimator</h2>

<!-- Visit Counter -->
<p style="margin-top:-5px;">
  ðŸ‘¥ <strong>Visits to this calculator:</strong>
  <span id="bioCount">0</span>
</p>

<!-- ============================= -->
<!-- STEP 1: QUIZ AVERAGE CALC     -->
<!-- ============================= -->

<p><strong>Step 1:</strong> Calculate your Average of Best Quiz Scores</p>
<p>Enter all quiz scores as <strong>percentages</strong> (0â€“100).</p>

<label>GQ01:</label>
<input type="number" id="b_GQ01" min="0" max="100" step="0.1">

<label>GQ02:</label>
<input type="number" id="b_GQ02" min="0" max="100" step="0.1">

<label>GQ03:</label>
<input type="number" id="b_GQ03" min="0" max="100" step="0.1">

<!-- Multi-part quizzes -->

<label>GQ4A:</label>
<input type="number" id="b_GQ4A" min="0" max="100" step="0.1">

<label>GQ4B:</label>
<input type="number" id="b_GQ4B" min="0" max="100" step="0.1">

<label>GQ5A:</label>
<input type="number" id="b_GQ5A" min="0" max="100" step="0.1">

<label>GQ5B:</label>
<input type="number" id="b_GQ5B" min="0" max="100" step="0.1">

<label>GQ6A:</label>
<input type="number" id="b_GQ6A" min="0" max="100" step="0.1">

<label>GQ6B:</label>
<input type="number" id="b_GQ6B" min="0" max="100" step="0.1">

<label>GQ07:</label>
<input type="number" id="b_GQ07" min="0" max="100" step="0.1">

<label>GQ08:</label>
<input type="number" id="b_GQ08" min="0" max="100" step="0.1">

<button class="calcButton" onclick="calculateBioQuiz()">
  Calculate Average of Best Quiz Scores
</button>

<div id="bioQuizResult" class="resultBox"></div>

<!-- ============================= -->
<!-- STEP 2: FINAL GRADE CALC      -->
<!-- ============================= -->

<h3 style="margin-top:35px;">Step 2: Calculate Your Final Course Percentage</h3>
<p>Your Average of Best Quiz Scores from Step 1 will auto-fill below.</p>

<label>Midterm Exam Score (%):</label>
<input type="number" id="b_mt" min="0" max="100" step="0.1">

<label>Final Exam Score (%):</label>
<input type="number" id="b_final" min="0" max="100" step="0.1">

<label>Average of Best Quiz Scores (%):</label>
<input type="number" id="b_quiz" readonly>

<label>Average Group Project Score (%):</label>
<input type="number" id="b_gp" min="0" max="100" step="0.1">

<label>Attendance Score (%):</label>
<input type="number" id="b_attend" min="0" max="100" step="0.1">

<button class="calcButton" onclick="calculateBioFinal()">
  Calculate Final Score
</button>

<div id="bioFinalResult" class="resultBox"></div>

<button class="returnButton" onclick="returnHome()">
  â†© Return to Course Selection
</button>

</div> <!-- END BIO PSYCH TAB -->

<!-- ============================================================= -->
<!-- TAB SWITCHING + VISIT COUNTERS                               -->
<!-- ============================================================= -->

<script>
/* ================================================================
   Helper: Show selected course tab & hide others
================================================================ */
function openCourse(courseName) {

  // Hide all tabs
  document.getElementById("intro").style.display = "none";
  document.getElementById("bio").style.display = "none";

  // Hide welcome screen
  document.getElementById("welcomeBox").style.display = "none";

  // Show the selected tab
  document.getElementById(courseName).style.display = "block";

  // Update visit counters
  if (courseName === "intro") {
    incrementCounter("introCount");
  } else if (courseName === "bio") {
    incrementCounter("bioCount");
  }
}

/* ================================================================
   Helper: Return to welcome screen
================================================================ */
function returnHome() {
  document.getElementById("intro").style.display = "none";
  document.getElementById("bio").style.display = "none";
  document.getElementById("welcomeBox").style.display = "block";
}

/* ================================================================
   Visit Counter using localStorage
================================================================ */
function incrementCounter(id) {
  let count = localStorage.getItem(id);

  if (!count) count = 0;
  count = Number(count) + 1;

  localStorage.setItem(id, count);
  document.getElementById(id).innerText = count;
}

/* ================================================================
   Initialize visit counters & hide tabs on load
================================================================ */
document.addEventListener("DOMContentLoaded", () => {

  // Load stored visit counts
  const introStored = localStorage.getItem("introCount") || 0;
  const bioStored   = localStorage.getItem("bioCount")   || 0;

  // Display stored values
  document.getElementById("introCount").innerText = introStored;
  document.getElementById("bioCount").innerText   = bioStored;

  // Ensure both calculators are hidden at startup
  document.getElementById("intro").style.display = "none";
  document.getElementById("bio").style.display = "none";
});
</script>

<!-- ============================================================= -->
<!-- INTRO PSYCH + BIO PSYCH CALCULATION LOGIC                    -->
<!-- ============================================================= -->

<script>
/* ================================================================
   SHARED LETTER GRADE FUNCTION (Inclusive Upper Bounds)
================================================================ */
function computeLetter(score) {

  if (score >= 92.45) return "A";
  if (score >= 89.45) return "A-";
  if (score >= 86.45) return "B+";
  if (score >= 82.45) return "B";
  if (score >= 79.45) return "B-";
  if (score >= 76.45) return "C+";
  if (score >= 72.45) return "C";
  if (score >= 69.45) return "C-";
  if (score >= 66.45) return "D+";
  if (score >= 62.45) return "D";
  if (score >= 59.45) return "D-";

  return "F";
}


/* ================================================================
   INTRO PSYCHOLOGY â€” STEP 1:
   DROP LOWEST TWO â†’ AVERAGE BEST SIX
================================================================ */

function calculateIntroQuiz() {

  const q01 = parseFloat(document.getElementById("i_GQ01").value);
  const q2A = parseFloat(document.getElementById("i_GQ2A").value);
  const q2B = parseFloat(document.getElementById("i_GQ2B").value);
  const q03 = parseFloat(document.getElementById("i_GQ03").value);
  const q4A = parseFloat(document.getElementById("i_GQ4A").value);
  const q4B = parseFloat(document.getElementById("i_GQ4B").value);
  const q05 = parseFloat(document.getElementById("i_GQ05").value);
  const q06 = parseFloat(document.getElementById("i_GQ06").value);
  const q07 = parseFloat(document.getElementById("i_GQ07").value);
  const q08 = parseFloat(document.getElementById("i_GQ08").value);

  const all = [q01, q2A, q2B, q03, q4A, q4B, q05, q06, q07, q08];
  if (all.some(v => isNaN(v))) {
    alert("Please enter ALL quiz scores before calculating.");
    return;
  }

  const GQ02 = (q2A + q2B) / 2;
  const GQ04 = (q4A + q4B) / 2;

  let quizzes = [
    q01, GQ02, q03, GQ04,
    q05, q06, q07, q08
  ];

  quizzes.sort((a,b) => a - b);
  const bestSix = quizzes.slice(2);

  const avg =
    bestSix.reduce((a,b)=>a+b,0) / bestSix.length;

  document.getElementById("introQuizResult").style.display = "block";
  document.getElementById("introQuizResult").innerHTML =
    `Your <strong>Average Quiz Score</strong> (after dropping two lowest) is:
     <span style="font-size:20px;">${avg.toFixed(2)}%</span>`;

  document.getElementById("i_quiz").value = avg.toFixed(2);
}


/* ================================================================
   INTRO PSYCHOLOGY â€” STEP 2:
   FINAL PERCENTAGE + LETTER GRADE
================================================================ */

function calculateIntroFinal() {

  const mt1   = parseFloat(document.getElementById("i_mt1").value);
  const mt2   = parseFloat(document.getElementById("i_mt2").value);
  const fin   = parseFloat(document.getElementById("i_final").value);
  const quiz  = parseFloat(document.getElementById("i_quiz").value);
  const gp    = parseFloat(document.getElementById("i_gp").value);
  const att   = parseFloat(document.getElementById("i_attend").value);

  const fields = [mt1, mt2, fin, quiz, gp, att];
  if (fields.some(v => isNaN(v))) {
    alert("Please enter ALL fields to calculate your final score.");
    return;
  }

  const total =
      0.15 * mt1 +
      0.25 * mt2 +
      0.25 * fin +
      0.20 * quiz +
      0.10 * gp +
      0.05 * att;

  const letter = computeLetter(total);

  document.getElementById("introFinalResult").style.display = "block";
  document.getElementById("introFinalResult").innerHTML =
    `Your <strong>Final Course Percentage</strong> is 
     <span style="font-size:20px;">${total.toFixed(2)}%</span><br>
     Letter Grade: <strong>${letter}</strong>`;
}


/* ================================================================
   BIOLOGICAL PSYCHOLOGY â€” STEP 1:
   DROP LOWEST ONE â†’ AVERAGE BEST SEVEN
================================================================ */

function calculateBioQuiz() {

  const q01 = parseFloat(document.getElementById("b_GQ01").value);
  const q02 = parseFloat(document.getElementById("b_GQ02").value);
  const q03 = parseFloat(document.getElementById("b_GQ03").value);
  const q4A = parseFloat(document.getElementById("b_GQ4A").value);
  const q4B = parseFloat(document.getElementById("b_GQ4B").value);
  const q5A = parseFloat(document.getElementById("b_GQ5A").value);
  const q5B = parseFloat(document.getElementById("b_GQ5B").value);
  const q6A = parseFloat(document.getElementById("b_GQ6A").value);
  const q6B = parseFloat(document.getElementById("b_GQ6B").value);
  const q07 = parseFloat(document.getElementById("b_GQ07").value);
  const q08 = parseFloat(document.getElementById("b_GQ08").value);

  const all = [q01, q02, q03, q4A, q4B, q5A, q5B, q6A, q6B, q07, q08];
  if (all.some(v => isNaN(v))) {
    alert("Please enter ALL quiz scores before calculating.");
    return;
  }

  const GQ04 = (q4A + q4B) / 2;
  const GQ05 = (q5A + q5B) / 2;
  const GQ06 = (q6A + q6B) / 2;

  let quizzes = [
    q01, q02, q03,
    GQ04, GQ05, GQ06,
    q07, q08
  ];

  quizzes.sort((a,b) => a - b);
  const bestSeven = quizzes.slice(1);

  const avg =
    bestSeven.reduce((a,b)=>a+b,0) / bestSeven.length;

  document.getElementById("bioQuizResult").style.display = "block";
  document.getElementById("bioQuizResult").innerHTML =
    `Your <strong>Average of Best Quiz Scores</strong> 
     (after dropping the lowest) is:
     <span style="font-size:20px;">${avg.toFixed(2)}%</span>`;

  document.getElementById("b_quiz").value = avg.toFixed(2);
}


/* ================================================================
   BIO PSYCH â€” STEP 2:
   FINAL PERCENTAGE + LETTER GRADE
================================================================ */

function calculateBioFinal() {

  const mt    = parseFloat(document.getElementById("b_mt").value);
  const fin   = parseFloat(document.getElementById("b_final").value);
  const quiz  = parseFloat(document.getElementById("b_quiz").value);
  const gp    = parseFloat(document.getElementById("b_gp").value);
  const att   = parseFloat(document.getElementById("b_attend").value);

  const fields = [mt, fin, quiz, gp, att];
  if (fields.some(v => isNaN(v))) {
    alert("Please enter ALL fields to calculate your final score.");
    return;
  }

  const total =
      0.25 * mt +
      0.30 * fin +
      0.25 * quiz +
      0.15 * gp +
      0.05 * att;

  const letter = computeLetter(total);

  document.getElementById("bioFinalResult").style.display = "block";
  document.getElementById("bioFinalResult").innerHTML =
    `Your <strong>Final Course Percentage</strong> is 
     <span style="font-size:20px;">${total.toFixed(2)}%</span><br>
     Letter Grade: <strong>${letter}</strong>`;
}

</script>

<!-- ============================================================= -->
<!-- FOOTER + FRIENDLY MESSAGE + LAST UPDATED                      -->
<!-- ============================================================= -->

<hr style="
  width: 70%;
  margin: 50px auto 20px auto;
  border: 0;
  border-top: 1px solid rgba(0,0,0,0.08);
">

<div id="footerArea" style="text-align:center; margin-bottom:40px;">

  <p style="color:#475569; font-size:14px; margin-bottom:6px;">
    ðŸ˜Š <strong>Thank you for using the Grade Estimator!</strong>
  </p>

  <p style="color:#64748b; font-size:13px; margin:4px 0;">
    Version 1.0 â€” Intro Psych & Bio Psych Edition
  </p>

  <p style="color:#94a3b8; font-size:12px; margin-top:4px;">
    Last updated: <span id="lastUpdated"></span>
  </p>

</div>

<script>
/* ================================================================
   AUTO-SET LAST UPDATED TIMESTAMP
================================================================ */

document.addEventListener("DOMContentLoaded", () => {
  const now = new Date();

  const optionsDate = {
    year: "numeric",
    month: "long",
    day: "numeric"
  };

  let hours = now.getHours();
  const minutes = now.getMinutes().toString().padStart(2, "0");
  const ampm = hours >= 12 ? "PM" : "AM";
  hours = (hours % 12) || 12;

  const formatted =
    now.toLocaleDateString("en-US", optionsDate) +
    " at " +
    hours + ":" + minutes + " " + ampm;

  document.getElementById("lastUpdated").textContent = formatted;
});


/* ================================================================
   SMOOTH SCROLL ENHANCEMENTS
================================================================ */

function scrollToTopSmooth() {
  window.scrollTo({ top: 0, behavior: "smooth" });
}

/* Patch: make openCourse() scroll smoothly */
const _openCourse_original = openCourse;
openCourse = function(name) {
  _openCourse_original(name);
  scrollToTopSmooth();
};

/* Patch: make returnHome() scroll smoothly */
const _returnHome_original = returnHome;
returnHome = function() {
  _returnHome_original();
  scrollToTopSmooth();
};


/* ================================================================
   PAGE LOAD CONFIRMATION
================================================================ */
console.log("Grade Estimator fully initialized.");
</script>

</body>
</html>
